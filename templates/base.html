{% load static %}
{% load compress %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" sizes="48x48" href="{% static 'images/final-icon.png' %}">
    <!-- Fonts CDN -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <!-- icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <!-- swipper css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <!-- Lightbox CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Custom CSS -->
    {% compress css %}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    {% endcompress %}

    <!-- Extra CSS (Child templates can add custom CSS here) -->
        {% block extra_css %}
        
        {% endblock extra_css %}
    <title>
      {% block title %}
      My Django App <!-- Default title -->
      {% endblock title %}
    </title>
  </head>
  <body>
    <!-- Header Section -->
    <header>
      <div class="nav-header">
        <i class="bi bi-list" id="menu-category"></i>
            <div class="logo">
                <a href="{% url 'user:home' %}">
                    <img src="{% static 'images/final1.png' %}" alt="" class="header-logo">
                    
                </a>
            </div>
            <!-- Desktop Search -->
            <div class="search">
                <form action="" method="POST">
                    {% csrf_token %}
                    <div class="search-container">
                        <input required class="search-input" type="text" placeholder="" id="desktop-search-input" autocomplete="off">
                        <button class="i-button" type="submit"><i class="bi bi-search" aria-hidden="true"></i></button>
                        <div class="search-suggestions" id="desktop-search-suggestions"></div>
                    </div>
                </form>
            </div>
            <div class="icons">
                <div class="mobile-search">
                    <a href="#" id="open-search-window">
                        <i class="bi bi-search" id="mobile-search-icon"></i>
                    </a>
                </div>

            <a class="cart-side-menu nav-item" style="cursor: pointer;">
                <i class="nav-icon bi bi-cart-check-fill"></i>
                <span class="cart-count badge-top cart-bd">0</span> 
            </a>
            {% if user.is_authenticated %}
              <a class="nav-item" href="{% url 'product:wishlist-product' %}" style="cursor: pointer;">
                <i class="nav-icon bi bi-heart-fill"></i>
                <!-- <span class="badge-top">0</span> -->
            </a>
            {% else %}
            <a class="nav-item" href="{% url 'user:login' %}?next={% url 'product:wishlist-product' %}" style="cursor: pointer;">
                <i class="nav-icon bi bi-heart-fill"></i>
                <!-- <span class="badge-top">0</span> -->
            </a>
            {% endif %}
              {% if user.is_authenticated %}
                <div class="nav-dropdown">
                  <span class="nav-item"><i class="nav-icon bi bi-person-circle nav-toggle-dropdown"></i></span>
                  <ul class="nav-dropdown-menu">
                    <li><a href="{% url 'user:profile' %}">Profile</a></li>
                    {% if user.is_staff and user.is_superuser %}
                    <li><a href="{% url 'product:order_dashboard' %}">Dashboard</a></li>
                    {% endif %}
                    <li><a href="{% url 'user:logout' %}">Logout</a></li>
                </ul>
                </div>
                {% else %}
                <a class="nav-item" href="{% url 'user:login' %}" class="login-link">
                  <i class="nav-icon bi bi-person-fill"></i>
                </a>
                  
                {% endif %}  
            </div>
      </div>
      <!-- sidebar menu -->
      
      <div id="sidebar-menu" class="sidebar">
        <div class="header-sidebar">
            <div class="sidebar-logo">
                <a href="{% url 'user:home' %}" style="text-decoration: none;">
                    <img src="{% static 'images/final1.png' %}" alt="" class="header-logo">
                </a>
            </div>
            <button id="close-sidebar" class="close-btn">
                <i class="bi bi-x"></i>
            </button>
        </div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                <div class="menu-item">
                    <a href="{% url 'product:category-products' 'men-fashion' %}">Men Fashion</a>
                    <span class="sidebar-dropdown-toggle"><i class="bi bi-plus"></i></span>
                </div>
                <ul class="sidebar-dropdown-menu">
                    {% for sub in mens_fashion_subcategories %}
                        <li><a href="{% url 'user:products_by_subcategory' sub.category.slug sub.slug %}">{{ sub.title }}</a></li>
                    {% endfor %}
                </ul>
            </li>
            <li class="list-group-item">
                <div class="menu-item">
                    <a href="{% url 'product:category-products' 'women-fashion' %}">Women Fashion</a>
                    <span class="sidebar-dropdown-toggle"><i class="bi bi-plus"></i></span>
                </div>
                <ul class="sidebar-dropdown-menu">
                    {% for sub in womens_fashion_subcategories %}
            <li><a href="{% url 'user:products_by_subcategory' sub.category.slug sub.slug %}">{{ sub.title }}</a></li>
          {% endfor %}
                </ul>
            </li>
            <li class="list-group-item">
                <div class="menu-item">
                    <a href="{% url 'product:category-products' 'kids' %}">Kids</a>
                    <span class="sidebar-dropdown-toggle"><i class="bi bi-plus"></i></span>
                </div>
                <ul class="sidebar-dropdown-menu">
                    {% for sub in kids_item_subcategories %}
            <li><a href="{% url 'user:products_by_subcategory' sub.category.slug sub.slug %}">{{ sub.title }}</a></li>
          {% endfor %}
                </ul>
            </li>
            <li class="list-group-item">
                <div class="menu-item">
                    <a href="{% url 'product:category-products' 'gadgets' %}">Gadgets</a>
                    <span class="sidebar-dropdown-toggle"><i class="bi bi-plus"></i></span>
                </div>
                <ul class="sidebar-dropdown-menu">
                    {% for sub in gadgets_subcategories %}
            <li><a href="{% url 'user:products_by_subcategory' sub.category.slug sub.slug %}">{{ sub.title }}</a></li>
          {% endfor %}
                </ul>
            </li>
            <li class="list-group-item">
                <div class="menu-item">
                    <a href="{% url 'product:category-products' 'accessories' %}">Accessories</a>
                    <span class="sidebar-dropdown-toggle"><i class="bi bi-plus"></i></span>
                </div>
                <ul class="sidebar-dropdown-menu">
                    {% for sub in accessories_subcategories %}
            <li><a href="{% url 'user:products_by_subcategory' sub.category.slug sub.slug %}">{{ sub.title }}</a></li>
          {% endfor %}
                </ul>
            </li>
            
            <li class="list-group-item">
                <div class="menu-item">
                    <a href="{% url 'product:category-products' 'food' %}">Food</a>
                </div>   
            </li>
            <li class="list-group-item">
                <div class="menu-item">
                    <a href="{% url 'product:wishlist-product' %}">Wishlist</a>
                </div>   
            </li>
            {% if user.is_authenticated %}
            <li class="list-group-item">
                <div class="menu-item">
                    <a href="{% url 'user:logout' %}">Log Out</a>
                </div>   
            </li>
            {% endif %}
        </ul>
    </div>

        <!-- bottom navbar -->
        <div class="bottom-header">
            <div class="bottom-icons">
                <a href="{% url 'user:home' %}">
                    <i class="bi bi-house"></i><br>Home
                </a>
                <a href="{% url 'product:wishlist-product' %}">
                    <i class="nav-icon bi bi-heart-fill"></i><br>Wishlist
                </a>
                <a href="#" id="bottom-open-search-window">
                    <i class="bi bi-search"></i><br>Search
                </a>
                <a href="#" class="cart-side-menu">
                    <i class="bi bi-cart-check-fill"></i><br><span class="cart-count">0</span> <span>item</span>
                </a>
                {% if user.is_authenticated %}
                <a href="{% url 'user:profile' %}">
                    <i class="bi bi-person-fill"></i><br>Profile
                </a>
                {% else %}
                <a href="{% url 'user:login' %}">
                    <i class="bi bi-person-fill"></i><br>login
                </a>
                {% endif %}
            </div>
            <div class="overlay"></div>
        </div>

    <!-- cart-sidebar-menu -->
    {% include 'product/cart.html' %}
    </header>
    {% include 'header-category.html' %}
<!-- Mobile Search Window -->
<div id="search-window" class="search-window">
    <div class="search-header">
        <button id="close-search-window" class="close-btn">
            <i class="bi bi-x"></i>
        </button>
        <p>Search Products</p>
    </div>
    <div class="search-window-header">
        <form action="" method="GET" id="mobile-search-form">
            {% csrf_token %}
            <input type="text" placeholder="Search..." class="search-input" id="mobile-search-input" autocomplete="off"/>
            <button type="submit" class="search-window-button"><i class="bi bi-search"></i></button>
        </form>
        <div class="search-suggestions" id="mobile-search-suggestions"></div>
    </div>
</div>       
       <!-- end search window -->  

    <!-- blur overlay -->
    <div id="overlay" class="overlay"></div>
    <!-- Main Content Section -->
      {% block content %}
      
      {% endblock content %}

    <!-- Footer Section -->
      {% include 'footer.html' %}
    
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- jquery cdn -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Extra JavaScript (Child templates can add custom JS here) -->
    {% compress js %}
    <script type="text/JavaScript" src="{% static 'js/main.js' %}"></script>
    {% endcompress %}
    <!-- Typed.js CDN -->
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
    <!-- swipper js cdn -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <!-- Lightbox JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    {% block extra_js %}
    {% endblock %}
    <div id="toast-container" class="toast-container"></div>
  </body>
</html>
